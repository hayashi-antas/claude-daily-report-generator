# 日報ジェネレーター 仕様書

## 目的

ユーザーが「今日やったこと」を入力すると、上司に提出できる丁寧な日報文（日本語・です/ます調）を「テンプレート組み立て方式」で生成し、コピーできるようにする。

## 対象ユーザー

日本の職場で日報提出をするエンジニア（初級〜中級）。

## 技術スタック

- HTML5, CSS3, JavaScript (Vanilla)
- **ビルド不要**。単一のHTMLファイル（index.html）内にCSS/JSを含める構成。
- スタイリングには **Tailwind CSS (CDN版)** を使用し、モダンで見やすいUIにする。
- JavaScriptは1ファイル内に収め、クラス設計や過度な抽象化は行わず、読みやすさを優先する。

---

## 機能仕様

### 1. 入力フォーム

| フィールド名 | 必須/任意 | 入力形式 | 説明 |
|-------------|----------|---------|------|
| 今日やったこと | 必須 | 複数行テキストエリア | 箇条書き入力を想定 |
| 学び・気づき | 任意 | 複数行テキストエリア | 1行または複数行 |
| 明日の予定 | 任意 | 複数行テキストエリア | 1行または複数行 |

※文字数指定機能は「ルールベースでは困難」なためスコープ外とする。

### 2. 生成ロジック（ルールベース）

**外部API（LLM）は使用しない。**

以下のロジックで文字列を結合する。

#### 2.1 出力構成

1. **挨拶**: 「お疲れ様です。本日の業務日報を報告いたします。」
2. **業務内容**: 「【本日の業務内容】」という見出しの後に、入力された各行を箇条書き形式（・付き）で出力
3. **学び**: 入力がある場合、「【学び・気づき】」という見出しの後に箇条書き形式で記述を追加
4. **予定**: 入力がある場合、「【明日の予定】」という見出しの後に箇条書き形式で記述を追加
5. **結び**: 「よろしくお願いいたします。」

※日報本文には日付を含めない（提出先のフォーマットに依存するため）。

#### 2.2 文末変換ルール

| 条件 | 処理 |
|-----|------|
| 「です」「ます」「した」「ました」で終わる場合 | そのまま採用（句点がなければ追加） |
| 句点「。」で終わる場合 | そのまま採用 |
| 上記以外 | 以下の文末パターンをランダムに付与 |

**文末変換パターン（4種類からランダム選択）**:
- 「しました。」
- 「を実施しました。」
- 「を行いました。」
- 「に取り組みました。」

#### 2.3 行頭記号の除去

以下の行頭記号は自動的に除去して文章化する：

- 記号: `・` `-` `−` `–` `*` `●` `○` `■` `□` `◆` `◇` `▪` `▫`
- 番号付き: `1.` `2.` 等（数字+ピリオド形式）
- 除去後の先頭空白（半角・全角）も削除

#### 2.4 空行の扱い

入力テキスト中の空行は無視する。

#### 2.5 セクション別の処理

| セクション | 文末変換 | 出力形式 |
|-----------|---------|---------|
| 業務内容 | 適用する | 箇条書き（・付き） |
| 学び・気づき | 適用しない（句点のみ補完） | 箇条書き（・付き） |
| 明日の予定 | 適用しない | 箇条書き（・付き） |

### 3. 出力表示エリア

- 生成された日報文を`<textarea>`で**編集可能な状態**で表示する（ユーザーが最終調整できるようにするため）
- 現在の「文字数」をリアルタイムでカウントして表示する（「現在：約○○文字」）
- 生成ボタン押下時、既存の出力は確認ダイアログなしで上書きする

### 4. アクションボタン

#### 4.1 「日報を生成する」ボタン

- 生成ロジックを実行
- 入力欄（今日やったこと）が空の場合、「業務内容を入力してください」とアラートを表示
- 生成後、出力エリアまで自動スクロール

#### 4.2 「コピー」ボタン

- 生成エリアの内容をクリップボードにコピー
- 成功時に「コピーしました！」とトースト通知を表示（3秒間表示後に自動消去）
- `navigator.clipboard` が失敗する場合に備え、`textarea選択 + document.execCommand('copy')` のフォールバックを実装

---

## 非機能要件

### レスポンシブデザイン

- 1画面で完結
- スマホでもPCでも崩れないレスポンシブデザイン

### 配色

ビジネスライクな配色を基調とする：
- 白
- グレー
- 青（アクセントカラー）
- 緑（出力エリア・コピーボタン）

### データ永続化

- 入力内容は `localStorage` に自動保存し、リロードしても消えないようにする
- 保存タイミング: 各テキストエリアのinputイベント発火時に即時保存
- 保存キー: `dailyReportGenerator`

---

## 受け入れ基準

1. 入力が「今日やったこと」1行だけでも、挨拶と結びがついた完全な文章になる
2. 入力欄が空の場合、生成ボタンを押しても「業務内容を入力してください」とアラートが出る
3. HTMLファイルをブラウザで開くだけで即座に動作する
4. コピー機能が正常に動作し、成功時にトースト通知が表示される
5. ページをリロードしても入力内容が保持される
6. スマートフォン・PCの両方で正常に表示・操作できる

---

## ファイル構成

```
index.html    # CSS/JSを含む単一ファイル
SPEC.md       # 本仕様書
```

---

## 出力例

### 入力

**今日やったこと:**
```
・APIの設計書を作成
・ログイン機能の実装
・コードレビュー対応
```

**学び・気づき:**
```
エラーハンドリングの重要性を再認識しました
```

**明日の予定:**
```
・単体テストの作成
・チームミーティング参加
```

### 出力

```
お疲れ様です。本日の業務日報を報告いたします。

【本日の業務内容】
・APIの設計書を作成しました。
・ログイン機能の実装を行いました。
・コードレビュー対応に取り組みました。

【学び・気づき】
・エラーハンドリングの重要性を再認識しました。

【明日の予定】
・単体テストの作成
・チームミーティング参加

よろしくお願いいたします。
```
